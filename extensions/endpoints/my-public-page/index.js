"use strict";module.exports=(t,{services:n})=>{const{ItemsService:a}=n;t.get("/",async(t,n)=>{const i=new a("artifacts",{schema:t.schema,accountability:null});try{const t=await i.readByQuery({fields:["artifact_id","title","filename","public_url","drone_id","timestamp"]}),a=`\n<!DOCTYPE html>\n<html lang="en">\n<head>\n\t<meta charset="UTF-8">\n\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t<title>Artifacts Gallery - Public</title>\n\t<style>\n\t\t* { margin: 0; padding: 0; box-sizing: border-box; }\n\t\tbody { \n\t\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n\t\t\tbackground: #f5f5f5; \n\t\t\tpadding: 20px; \n\t\t}\n\t\t.header { \n\t\t\ttext-align: center; \n\t\t\tpadding: 40px 20px; \n\t\t\tbackground: white; \n\t\t\tborder-radius: 8px; \n\t\t\tmargin-bottom: 30px; \n\t\t}\n\t\t.header h1 { color: #333; font-size: 2.5em; margin-bottom: 10px; }\n\t\t.artifacts-grid { \n\t\t\tdisplay: grid; \n\t\t\tgrid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); \n\t\t\tgap: 20px; \n\t\t\tmax-width: 1400px; \n\t\t\tmargin: 0 auto; \n\t\t}\n\t\t.artifact-card { \n\t\t\tbackground: white; \n\t\t\tborder-radius: 8px; \n\t\t\toverflow: hidden; \n\t\t\tbox-shadow: 0 2px 8px rgba(0,0,0,0.1); \n\t\t}\n\t\t.artifact-card:hover { transform: translateY(-4px); }\n\t\t.artifact-card h3 { \n\t\t\tpadding: 15px; \n\t\t\tbackground: #6644ff; \n\t\t\tcolor: white; \n\t\t}\n\t\t.image-container { \n\t\t\theight: 200px; \n\t\t\tdisplay: flex; \n\t\t\talign-items: center; \n\t\t\tjustify-content: center; \n\t\t\tbackground: #f5f5f5; \n\t\t}\n\t\t.image-container img { \n\t\t\twidth: 100%; \n\t\t\theight: 100%; \n\t\t\tobject-fit: contain; \n\t\t}\n\t\t.info { padding: 15px; color: #666; line-height: 1.6; font-size: 0.9em; }\n\t\t.info-row { display: flex; justify-content: space-between; margin-bottom: 8px; }\n\t\t.info-label { font-weight: 600; color: #333; }\n\t</style>\n</head>\n<body>\n\t<div class="header">\n\t\t<h1>Artifacts Archive</h1>\n\t\t<p>Public Collection - ${t.length} items</p>\n\t</div>\n\t<div class="artifacts-grid">\n\t\t${t.map(t=>`\n\t\t\t<div class="artifact-card">\n\t\t\t\t<h3>${t.title||"Untitled"}</h3>\n\t\t\t\t${t.public_url?`\n\t\t\t\t\t<div class="image-container">\n\t\t\t\t\t\t<img src="${t.public_url}" alt="${t.title||t.filename}">\n\t\t\t\t\t</div>\n\t\t\t\t`:'\n\t\t\t\t\t<div class="image-container">\n\t\t\t\t\t\t<p style="color: #999;">No preview available</p>\n\t\t\t\t\t</div>\n\t\t\t\t'}\n\t\t\t\t<div class="info">\n\t\t\t\t\t<div class="info-row">\n\t\t\t\t\t\t<span class="info-label">Filename:</span>\n\t\t\t\t\t\t<span>${t.filename}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t${t.drone_id?`\n\t\t\t\t\t\t<div class="info-row">\n\t\t\t\t\t\t\t<span class="info-label">Drone:</span>\n\t\t\t\t\t\t\t<span>${t.drone_id}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`:""}\n\t\t\t\t\t<div class="info-row">\n\t\t\t\t\t\t<span class="info-label">Uploaded:</span>\n\t\t\t\t\t\t<span>${new Date(t.timestamp).toLocaleDateString()}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`).join("")}\n\t</div>\n</body>\n</html>`;n.set("Content-Type","text/html"),n.send(a)}catch(t){n.status(500).send("Error: "+t.message)}})};
